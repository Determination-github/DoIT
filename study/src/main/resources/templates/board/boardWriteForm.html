<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">

<th:block layout:fragment="extraCSS">
  <!--ë‹¬ë ¥ìš©-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!--ì„¬ë¨¸ë…¸íŠ¸-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.20/summernote-bs5.min.css" integrity="sha512-ngQ4IGzHQ3s/Hh8kMyG4FC74wzitukRMIcTOoKT3EyzFZCILOPF0twiXOQn75eDINUfKBYmzYn2AA8DkAk8veQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    .form-group.required label:after {
       content : " *";
       color: red;
    }
  </style>
  <script>
    $.datepicker.setDefaults({
      dateFormat: 'yy-mm-dd',
      prevText: 'ì´ì „ ë‹¬',
      nextText: 'ë‹¤ìŒ ë‹¬',
      monthNames: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'],
      monthNamesShort: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'],
      dayNames: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '],
      dayNamesShort: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '],
      dayNamesMin: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '],
      showMonthAfterYear: true,
      yearSuffix: 'ë…„'
    });

    $( function() {
      $( "#datepicker_to" ).datepicker();
      $( "#datepicker_from" ).datepicker();
    } );
</script>
</th:block>

<div layout:fragment="content" class="max-width">
  <section class="writeForm">
  <main class="flex-shrink-0">
      <div class="container">
        <form action="/board/write" th:action th:object="${boardDto}" method="post">
          <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"><h2>ì œëª©</h2></label>
            <input type="text" th:field="*{board_title}" th:errorclass="field-error" class="form-control form-control-lg" id="exampleFormControlInput1" placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.">
          </div>
          <div class="field-error" th:errors="*{board_title}"/>
          <div class="mb-3">
            <div class="row">
              <div class="col">
                <input hidden type="text" name="id" th:field="*{board_writerId}"/>
                <input hidden type="text" name="nickname" th:field="*{writer_nickName}"/>
                <div class="form-row">
                  <div class="form-group required col">
                    <label for="firstCategory" class="form-label">1ì°¨ ì¹´í…Œê³ ë¦¬</label>
                      <select th:field="*{board_interest1}" id="firstCategory" name="firstCategory" th:errorclass="field-error" class="form-control" onclick="category_change(this.value, secondCategory)">
                      <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                      <option value="1">ê°œë°œ</option>
                      <option value="2">ìê²©ì¦</option>
                      <option value="3">í”„ë¡œê·¸ë¨</option>
                    </select>
                    <small id="categoryHelp" class="form-text text-muted"></small>
                  </div>
                  <div class="field-error" th:errors="*{board_interest1}"/>
                </div>
              </div>

              <div class="col">
                <div class="form-group required col">
                    <label for="secondCategory" class="form-label">2ì°¨ ì¹´í…Œê³ ë¦¬</label>
                      <select th:field="*{board_interest2}" id="secondCategory" name="secondCategory" th:errorclass="field-error" class="form-control" onclick="category2_change(this.value, thirdCategory)">
                      <option value="">ì„ íƒí•˜ì„¸ìš”.</option>
                    </select>
                    <small class="invalid-feedback">2ì°¨ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</small>
                </div>
                <div class="field-error" th:errors="*{board_interest2}"/>
              </div>

              <div class="col">
                <div class="form-group required col">
                  <label for="thirdcategory" class="form-label">3ì°¨ ì¹´í…Œê³ ë¦¬</label>
                    <select th:field="*{board_interest3}" id="thirdCategory" name="thirdCategory" th:errorclass="field-error" class="form-control">
                    <option value="">ì„ íƒí•˜ì„¸ìš”.</option>
                  </select>
                  <small class="invalid-feedback">3ì°¨ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</small>
                </div>
                <div class="field-error" th:errors="*{board_interest3}"/>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <div  class="form-group col">
              <label class="form-label" >ëª¨ì§‘ê¸°ê°„ ğŸ—“ï¸</label>
              <div class="calender_wrap">
                <div class="calender_group"><input autocomplete="off" name="start" th:errorclass="field-error" class="calender1 form-control" type="text" id="datepicker_to" th:field="*{board_startDate}" placeholder="ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”."></div>
                <div class="field-error" th:errors="*{board_startDate}"/>
                <span class="calender_group calender_font_event"><strong style="font-size:30px;">~</strong></span>
                <div class="calender_group"><input autocomplete="off" name="end" th:errorclass="field-error" class="calender2 form-control" type="text" id="datepicker_from" th:field="*{board_endDate}" placeholder="ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”."></div>
                <div class="field-error" th:errors="*{board_endDate}"/>
              </div>
            </div>
          </div>

          <div class="mb-3">
            <div class="row">
              <div class="col">
                <div class="form-group required col">
                  <label for="firstZone" class="form-label">1ì°¨ ì§€ì—­</label>
                  <select th:field="*{board_location1}" id="firstZone" name="firstZone" class="form-control" onchange="zone_change(this.value, secondZone)">
                    <option value="">ì„ íƒí•˜ì„¸ìš”.</option>
                    <option value="1">ì„œìš¸íŠ¹ë³„ì‹œ</option>
                    <option value="2">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
                    <option value="3">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
                    <option value="4">ì¸ì²œê´‘ì—­ì‹œ</option>
                    <option value="5">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
                    <option value="6">ëŒ€ì „ê´‘ì—­ì‹œ</option>
                    <option value="7">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
                    <option value="8">ê°•ì›ë„</option>
                    <option value="9">ê²½ê¸°ë„</option>
                    <option value="10">ê²½ìƒë‚¨ë„</option>
                    <option value="11">ê²½ìƒë¶ë„</option>
                    <option value="12">ì „ë¼ë‚¨ë„</option>
                    <option value="13">ì „ë¼ë¶ë„</option>
                    <option value="14">ì¶©ì²­ë‚¨ë„</option>
                    <option value="15">ì¶©ì²­ë¶ë„</option>
                    <option value="16">ì œì£¼ë„</option>
                  </select>
                  <small id="categoryHelp two" class="form-text text-muted"></small>
                </div>
              </div>

              <div class="col">
                <div class="form-group required col">
                  <label for="secondZone" class="form-label">2ì°¨ ì§€ì—­</label>
                  <select th:field="*{board_location2}" id="secondZone" name="secondZone" class="form-control">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                  </select>
                </div>
              </div>
          </div>

          <div class="mb-3">
            <div class="form-check pull-right mr-0" style="margin-top : 10px;">
              <input class="form-check-input" type="checkbox" onclick="is_checked()" id="onOffLine" th:field="*{board_onOffLine}">
              <label class="form-check-label" for="onOffLine">
                <b>Online</b>
              </label>
            </div>
          </div>

          <div class="mb-3">
            <textarea name="board_content" id="board_content" class="form-control" th:errorclass="field-error"  placeholder="Type the content here!" th:field="*{board_content}"></textarea>
              <script>

                $(document).ready(function() {
                    $('#board_content').summernote({
                        height : 300,
                        minHeight : null,
                        maxHeight : null,
                        focus : true,
                        callbacks : {
                            onImageUpload : function(files, editor, welEditable) {
                                for (var i = 0; i < files.length; i++) {
                                    sendFile(files[i], this);
                                }
                            }
                        }
                    });
                });

                function sendFile(file, el) {
                    var form_data = new FormData();
                    form_data.append('file', file);
                    $.ajax({
                        data : form_data,
                        type : "POST",
                        url : '/file/images',
                        cache : false,
                        contentType : false,
                        enctype : 'multipart/form-data',
                        processData : false,
                        success : function(url) {
                            $(el).summernote('insertImage', url, function($image) {
                                $image.css('width', "50%");
                            });
                        }
                    });
                }
              </script>
            </div>
          </div>
          <div class="field-error" th:errors="*{board_content}"/>

          <div class="mb-3">
            <input id="subBtn" class="btn btn-primary" type="submit" value="ì‘ì„±í•˜ê¸°" style="float: right;" onclick="goWrite(this.form)"/>
          </div>

        </form>
      </div>
  </main>
  </section>
</div>
<th:block layout:fragment="extraJs">

<!--ë‹¬ë ¥ìš©-->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!--ì„¬ë¨¸ë…¸íŠ¸-->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.20/summernote-bs5.min.js" integrity="sha512-6F1RVfnxCprKJmfulcxxym1Dar5FsT/V2jiEUvABiaEiFWoQ8yHvqRM/Slf0qJKiwin6IDQucjXuolCfCKnaJQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<style>
    .field-error {
        border-color: #dc3545;
        color: #dc3545;
    }
</style>


<script type="text/javascript" src="/js/category.js" ></script>
<script type="text/javascript" src="/js/zone.js"></script>
<script type="text/javascript" th:inline="javascript">
  /*<![CDATA[*/

  function is_checked() {

    const checkbox = document.getElementById('onOffLine');

    const is_checked = checkbox.checked;

    if(is_checked === true) {
      $("#firstZone").attr("disabled", true);
      $("#secondZone").attr("disabled", true);
    } else {
      $("#firstZone").removeAttr("disabled");
      $("#secondZone").removeAttr("disabled");
    }
  }

  /*]]>*/
  </script>
</th:block>
</html>