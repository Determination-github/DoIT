<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" class="fontawesome-i2svg-active fontawesome-i2svg-complete" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/css/page_style.css}">
    <script th:src="@{https://code.jquery.com/jquery-3.3.1.js}"></script>
    <script th:src="@{/js/bootstrap.bundle.min.js}" ></script>
    <script th:src="@{/js/page_style.js}" defer></script>
</head>
<body class="d-flex flex-column h-100">
<nav th:replace="/fragment/nav.html :: fragment_nav"></nav>
<!-------------------------------------------------------------------------------------------------------->
<!-------------------------------------------------------------------------------------------------------->
<!-------------------------------------------------------------------------------------------------------->
<div id="dropdown_menu_wrap" class="dropdown_menu_wrap">
    <th:block th:if="${session.nickName == null}">
        <a style="font-weight: bold;">ÏïàÎÖïÌïòÏÑ∏Ïöî, [[${session.nickName}]]Îãò!</a>
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-emoji-smile-fill" viewBox="0 0 16 16" style="color: #ffd400;">
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zM4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z"/>
        </svg>
        <dl class="dropdown_menu1">
            <dd class="nav_list_dd_border nav_list_dd_border_bottom"><a class="dropdown-item" tabindex="-1" th:href="@{/login}">Î°úÍ∑∏Ïù∏</a></dd>
            <dd class="nav_list_dd_border"><a class="dropdown-item" tabindex="-1" th:href="@{/join}">ÌöåÏõêÍ∞ÄÏûÖ</a></dd>
        </dl>
    </th:block>
    <th:block th:if="${session.nickName != null}">
        <dl id="dropdown_menu2" class="dropdown_menu2">
            <!-- <dt class="dropdown_menu2_title">ÎßàÏù¥ÌéòÏù¥ÏßÄ</dt> -->
            <dd class="nav_list_dd_border"><a id="dropdown_menu2_mypage" class="test dropdown-item dropdown-toggle"tabindex="-1" href="javascript:">ÎßàÏù¥ÌéòÏù¥ÏßÄ</a>
                <ul class="dropdown_menu2_menu">
                    <li class="nav_list_li_border"><a class="dropdown-item" tabindex="-1">[[${session.nickName}]]Îãò ÏïàÎÖïÌïòÏÑ∏Ïöî!</a></li>
                    <li class="nav_list_li_border"><a class="dropdown-item" tabindex="-1" th:href="@{/logout}">Î°úÍ∑∏ÏïÑÏõÉ</a></li>
                    <li class="nav_list_li_border"><a class="dropdown-item" tabindex="-1" href="edit.html">ÌöåÏõê ÏàòÏ†ï</a></li>
                    <li class="nav_list_li_border"><a class="dropdown-item" tabindex="-1" href="mywrite.html">ÎÇ¥Í∞Ä Ïì¥ Í∏Ä Î≥¥Í∏∞</a></li>
                    <li class="nav_list_li_border"><a class="dropdown-item" tabindex="-1" href="poem.html">Ï™ΩÏßÄ</a></li>
                </ul>
            </dd>
        </dl>
        <dl id="dropdown_menu3" class="dropdown_menu3">
            <!-- <dt class="dropdown_menu3_title">Ïä§ÌÑ∞Îîî</dt> -->
            <dd class="nav_list_dd_border"><a id="dropdown_menu3_study" class="test dropdown-item dropdown-toggle"tabindex="-1" href="javascript:">Ïä§ÌÑ∞Îîî</a>
                <ul class="dropdown_menu3_menu">
                    <li class="nav_list_li_border"><a class="dropdown-item" tabindex="-1" href="wishlist.html">Ï∞ú Î™©Î°ù</a></li>
                    <li class="nav_list_li_border"><a class="dropdown-item" tabindex="-1" href="joinstudy.html">Ï∞∏Ïó¨Ìïú Í∑∏Î£π Î≥¥Í∏∞</a></li>
                </ul>
            </dd>
        </dl>
    </th:block>
</div>
<!-------------------------------------------------------------------------------------------------------->
<!-------------------------------------------------------------------------------------------------------->
<!-------------------------------------------------------------------------------------------------------->
<div class="pc-display-none container col-lg-10 mt-2 mb-3">
</div>
<section class="py-3">
    <div class="container col-lg-10 mt-3">
        <div class="row gx-5">
            <th:block th:if="${session.nickName} == null or ${session.id} != ${boardDto.board_writerId}">
            <div class="col-lg-3">
                <div class="mobile-display-none">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex flex-column align-items-center text-center">
                                <img src="/img/ÌååÎ∞ÄÎ¶¨ÏïÑ ÏÑ±Îãπ.jpg" alt="ÏÑ±Îãπ" class="rounded-circle" width="120" height="120">
                                <div class="mt-3">
                                    <h4 class="text-break">[[${boardDto.writer_nickName}]]</h4>
                                    <p class="text-secondary mb-1"></p>
                                    <a class="btn btn-primary" type="button" th:href="@{/profile/{id}(id = ${boardDto.board_writerId})}">ÌîÑÎ°úÌïÑ Î≥¥Í∏∞</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </th:block>
            <div class="content-area" th:classappend="${session.id} == ${boardDto.board_writerId} ? 'col-lg-12' : 'col-lg-9'">
                <article>
                    <div class="row mb-4">
                        <div class="row">
                            <div  class="col-9" style="word-break: break-word;">
                                <h1 class="fw-bolder mb-1">[[${boardDto.board_title}]]</h1>
                            </div>
                            <div class="col-3 text-end pr-0">
                                <h4>
                                    <span class="badge bg-primary">Î™®Ïßë Ï§ë</span>
                                </h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="mb-2">[[${boardDto.board_subTitle}]]</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-7">
                                <div class="mb-2">Î™®ÏßëÍ∏∞Í∞Ñ : [[${boardDto.board_startDate}]] ~ [[${boardDto.board_endDate}]]</div>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <h5 class="d-inline">
                                    <span class="badge badge-light text-dark mr-1" style="background-color : #b3e5fc">#[[${boardDto.board_interest1}]]</span>
                                </h5>
                                <h5 class="d-inline">
                                    <span class="badge badge-light text-dark mr-1" style="background-color : #b3e5fc">#[[${boardDto.board_interest2}]]</span>
                                </h5>
                                <h5 class="d-inline">
                                    <span class="badge badge-light text-dark mr-1" style="background-color : #b3e5fc">#[[${boardDto.board_interest3}]]</span>
                                </h5>
                            </div>
                            <div class="col-6 text-end">
                                <th:block th:if="${session.nickName} == null or ${session.id} != ${boardDto.board_writerId}">
                                    <div>
                                        <i class="bi-heart" style="font-size: 1.5rem; color: red; cursor: pointer;"></i>
                                        <button type="button" class="btn btn-primary" id="wanna-join">üôã Ï∞∏Ïó¨ÌïòÍ≥† Ïã∂Ïñ¥Ïöî</button>
                                    </div>
                                </th:block>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <h5 class="d-inline">
                                    <span class="badge badge-info mr-1" style="background-color: blueviolet;">
                                      <i class="bi bi-geo-alt">
                                      </i>
                                      ÏÑúÏö∏ÌäπÎ≥ÑÏãú
                                    </span>
                                </h5>
                            </div>
                        </div>
                    </div>
                    <div class="card mb-4" style="min-height: 300px;">
                        <div class="card-body" th:utext="${boardDto.board_content}">
                        </div>
                    </div>
                </article>
                <section>
                    <form name="commentFrm" id="commentFrm">
                        <input type="hidden" name="totalPage" value>
                        <input type="hidden" name="page" value="0">
                    </form>
                    <div class="card bg-light">
                        <div class="card-header">
                            <h4 class="card-title">ÎåìÍ∏Ä</h4>
                            <input type="hidden" name="page" value="0">
                            <form name="frmComment">
                                <div class="input-group" >
                                    <input type="hidden" id="writerId" name="writerId" th:value="${session.id}">
                                    <input type="hidden" id="boardId" th:value="${boardDto.board_id}">
                                    <textarea class="form-control custom-control" id="comment" name="comment" rows="3" style="resize:none"></textarea>
                                    <button type="button" class="input-group-addon btn btn-primary" id="add-comment-btn">ÏûëÏÑ±</button>
                                </div>
                            </form>
                        </div>
                        <div class="card-body comment-section">
                            <div class="d-flex mb-3 parent-comment boarder-bottom mb-2 pb-3">
                                <input type="hidden" value="15" name="commentId" class="comment-id">
                                <div class="flex-shrink-0">
                                    <img class="rounded-circle" src="" alt="...">
                                </div>
                                <div class="ms-3 w-100">
                                    <div class="d-flex justify-content-between">
                                        <div class="fw-bold commenter-name">ÏÑ±Îãπ</div>
                                        <div class="reply-panel mr-2">
                                            <a href="#" class="reply-btn text-decoration-none">ÏàòÏ†ï</a>
                                            <a href="#" class="reply-btn text-decoration-none">ÏÇ≠Ï†ú</a>
                                            <a href="#" class="reply-btn text-decoration-none">ÎãµÍ∏Ä</a>
                                        </div>
                                    </div>
                                    <small class="text-muted text-sm date-panel">2022-04-19 15:32:22</small>
                                    <th:block th:each="comments : ${comments}">
                                        <ul class="list-group-flush">
                                            <li class="list-group-item">
                                                <span>
                                                    <span style="font-size: small"></span>
                                                    <span style="font-size: xx-small"></span>&nbsp;
                                                    <button class="badge bi bi-pencil-square"> ÏàòÏ†ï</button>
                                                    <button class="badge bi bi-trash"> ÏÇ≠Ï†ú</button>
                                                </span>
                                                <div>[[${comments.comment}]]</div>
                                            </li>
                                        </ul>
                                    </th:block>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="write">
                        <a class="btn btn-secondary btn-lg btn-block mt-2" type="button" id="edit" style="float: right;" href="./groups/newedit.html">ÏàòÏ†ïÌïòÍ∏∞</a>
                        <button class="btn btn-secondary btn-lg btn-block mt-2" type="button" id="delete" style="float: right; margin-right: 1%;">ÏÇ≠Ï†úÌïòÍ∏∞</button>
                    </div>
                </section>
            </div>
        </div>
    </div>
</section>
<script type="text/javascript" th:inline="javascript">
		/*<![CDATA[*/

        //ÎåìÍ∏Ä ÏûëÏÑ±
        $("#add-comment-btn").click(function(){
            const data = {
                writer_id : $("#writerId").val(),
                study_id : $("#boardId").val(),
                comment : $("#comment").val()

            }

            if (!data.comment || data.comment.trim() === "") {
                alert("ÎåìÍ∏Ä ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");
                return false;
            } else {
                $.ajax({
                    type:"POST",
                    url:"/comments/save/" + data.writer_id,
                    dataType : 'json',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(data),
                    cache : false,
                    success:function(result){
                        if(result == 2){
                            alert("ÎåìÍ∏ÄÏùÄ 500Ïûê ÎØ∏ÎßåÏúºÎ°ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");
                        } else if(result == 1){
                            alert("ÎåìÍ∏ÄÏù¥ Îì±Î°ùÎêòÏóàÏäµÎãàÎã§.");
                            window.location.reload();
                        } else {
                            alert("ÎåìÍ∏Ä Îì±Î°ù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.");
                        }
                    }
                });
            }
        });

		/*]]>*/
</script>
</body>
</html>