<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <title>title</title>


    <th:block layout:fragment="summernote">

    <link
            href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css"
            rel="stylesheet">
    <script
            src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
    <script
            src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
    <!-- include summernote css/js-->
    <link
            href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.css"
            rel="stylesheet">
    <script
            src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.js"></script>

    <link rel="stylesheet" href="css/second_nav.css">

    </th:block>

</head>
<body>
    <div class="header_login_ID_wrap">
        <p class="header_login_img"><a href="/"><img src="img/abc.png"/></a></p>
        <th:block th:if="${session.nickName == null}">
            <a style="font-weight: bold;">안녕하세요, [[${session.nickName}]]님!</a>
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-emoji-smile-fill" viewBox="0 0 16 16" style="color: #ffd400;">
                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zM4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z"/>
            </svg>
        </th:block>
    </div>

    <div layout:fragment="content" style="width: 60%; margin: auto;">
        <form enctype="multipart/form-data" action="/board/secondWrite" th:action="@{/board/secondWrite}" th:object="${boardWriteDto}" method="post">
            <input hidden type="text" name="writer" th:field="*{board_writerId}"/>
            <input hidden type="text" name="nickname" th:field="*{writer_nickName}"/>
            <input hidden type="text" name="category1" th:field="*{writer_interest1}"/>
            <input hidden type="text" name="category2" th:field="*{writer_interest2}"/>
            <input hidden type="text" name="category3" th:field="*{writer_interest3}"/>
            <input hidden type="text" name="startDate" th:field="*{board_startDate}"/>
            <input hidden type="text" name="endDate" th:field="*{board_endDate}"/>
            <input hidden type="text" name="location" th:field="*{board_location}"/>
            <input hidden type="text" name="subtitle" th:field="*{board_subTitle}"/>
            <input hidden type="text" name="on_offline" th:field="*{board_onOffline}"/>
            <input type="text" name="title" style="width: 40%;" th:field="*{board_title}" placeholder="제목"/><br>
            <br><br>
            <textarea name="board_content" id="board_content" class="form-control" placeholder="Type the content here!" th:field="*{board_content}"></textarea>
            <input id="subBtn" type="submit" value="글 작성" style="float: right;" onclick="goWrite(this.form)"/>
            <script>
            $(document).ready(function() {
                $('#board_content').summernote({
                    height : 300,
                    minHeight : null,
                    maxHeight : null,
                    focus : true,
                    callbacks : {
                        onImageUpload : function(files, editor, welEditable) {
                            for (var i = 0; i < files.length; i++) {
                                sendFile(files[i], this);
                            }
                        }
                    }
                });
            });

            function sendFile(file, el) {
                var form_data = new FormData();
                form_data.append('file', file);
                $.ajax({
                    data : form_data,
                    type : "POST",
                    url : '/file/images',
                    cache : false,
                    contentType : false,
                    enctype : 'multipart/form-data',
                    processData : false,
                    success : function(url) {
                        $(el).summernote('insertImage', url, function($image) {
                            $image.css('width', "50%");
                        });
                    }
                });
            }

            </script>
        </form>
    </div>
</body>
</html>